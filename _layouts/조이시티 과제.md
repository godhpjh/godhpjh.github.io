### 1. Java 에서 Error 와 Exception 의 차이에 대해서 설명하세요. 

\- Error와 Exception은 Throwable 클래스를 상속받은 하위 클래스로 Error의 경우 Unchecked Exception으로 시스템 자원의 부족이나 어플리케이션에서 예측하기 힘든 문제들을 말한다. 예로 Out of memory error, Stack Overflow Error, IOError 가 있다. 

Exception의 경우 런타임과 컴파일 시간에 일어나는 문제로, 주로 개발자가 작성한 코드에서 발생한다. 즉, Exception은 발생할 상황을 미리 예측하여 처리할 수 있다. Exception과 RuntimeException의 하위 클래스가 아닌 모든 하위 클래스는 Checked Exception이다.

Checked Exception의 경우 복구 가능성이 있는 예외이며 try-catch 블록이나 throw를 사용하여 해결한다. 예로 FileNotFoundException, ParseException 등이 있다.

Unchecked Exception의 종류로는 RuntimeExcpetion 하위에 있는 예외들로 NullPointerException, IndexOutOfBoundException 등이 있다.

 참고 : http://www.nextree.co.kr/p3239/

### 2. Spring Framework 의 주요 개념인 DI, IoC, AOP 에 대해 설명하고 왜 이런 개념들을 사용 하는지 본인의 생각을 기술 하세요. 

사용이유 - 기존에는 클래스 내에서 다른 객체를 사용하고 싶을 때 직접 new 연산자로 객체를 생성하고, getter/setter로 값을 관리하여야 했다.

이는 참조되는 객체의 구현이 바뀌게 되면 그 객체를 참조하고 있는 객체에서의 생성과 호출(사용)도 바뀌어야 하는 높은 의존성과 프로그램 내에서 서로 생성하고 참조하는 객체가 많아지게 되면서 높은 결합도를 가지게 된다.

객체 지향 프로그래밍은 낮은 의존성과 높은 캡슐화를 지향하기 때문에 의존성과 결합도를 낮추기 위해 Spring의 디자인 패턴들을 사용한다.

\- DI : 의존성 주입이라는 뜻으로 IoC를 실제로 구현하는 방법이다. Xml로 명시한 bean 객체들을 Spring Container에서 생성하면 이를 의존 관계에 따라 생성한 객체를 주입해준다.

주입 방법으로는 Setter 메서드, 생성자, 멤버 변수(Annotation)를 활용한 주입방법이 있다.

\- IoC : 제어의 역전이라는 뜻으로 인스턴스 생성 및 소멸을 개발자 대신 Spring Container가 대신 하며, 즉 제어권을 프레임워크가 갖는다는 의미.

\- AOP : 관점 지향 프로그래밍의 뜻으로, 흩어진 Aspect(동일한 기능)들을 모아서 모듈화 하는 기법이다. 동일한 기능들을 Aspect로 만들어 기능(Advice)을 명시하고 적용되는 위치(Pointcut)를 나타낸다.

 참고 : [AOP](https://velog.io/@max9106/Spring-AOP란-93k5zjsm95) || [DI](https://gmlwjd9405.github.io/2018/11/09/dependency-injection.html)

### 3. PreparedStatement 와 Statement 의 차이에 대해서 설명하세요. 

\- 두 인터페이스 모두 SQL 질의문을 전달하는 역할을 한다.

Statement 객체는 Connection 클래스의 createStatement() 메소드를 호출함으로써 얻어진다.

정적인 쿼리문을 처리할 수 있다. 즉, 쿼리문에 값이 미리 입력되어 있어야 한다.

PreparedStatement 객체는 Connection 클래스의 preparedStatement() 메소드를 사용해서 생성한다. 이 메소드는 인수로 SQL문을 담은 String객체가 필요하다.

SQL문장이 미리 컴파일되고, 실행 시간동안 인수값을 위한 공간을 확보할 수 있다는 점에서 Statement 객체와 다르다.

Statement 객체의 SQL은 실행될 때 매번 서버에서 분석해야 하는 반면, PreparedStatement 객체는 한번 분석되면 재사용이 용이하다.

각각의 인수에 대해에 placeholder를 사용하여 SQL문장을 정의할 수 있게 해준다. Placeholder는 ?로 표현된다.

동일한 SQL문을 특정 값만 바꾸어서 여러 번 실행해야 할 때, 인수가 많아서 SQL문을 정리해야 될 필요가 있을 때 사용하면 유용하다.

 참고 : https://all-record.tistory.com/79

### 4. 10억 건이 넘는 결제 로그 데이터가 실시간으로 쌓이는 서비스 입니다. 

##### A. 로그 데이터 유형이 아래와 같을 때 로그 데이터를 RDBMS 에 저장한다면 테이블 구조(DDL)을 기술하세요. 

##### i. 주문번호, 사용자 ID, 상품 ID, 결제 수단, 게임 코드, App_Store_결제_ID, 결제 일 시 

![img](file:///C:/Users/hacjin/AppData/Local/Temp/msohtmlclip1/01/clip_image001.png)

 

##### B. 로그 데이터 중 결제 일시 기준으로 2020 년 02월 10일에 게임 코드 8887 에서 결 제 한 사용자 목록을 조회 하는 Query 를 작성하세요. 

![img](file:///C:/Users/hacjin/AppData/Local/Temp/msohtmlclip1/01/clip_image002.png)

##### C. 로그 데이터를 RDBMS 에 저장하지 않는다면 어떤 기술을 사용하여 로그 데이터를 관리하는 것이 좋을 지 본인의 생각을 기술하세요. 

처음 파일기반으로 로그데이터를 관리를 생각했으나 방대한 양의 경우 로그 분석하는 시간이 많이 걸릴 것 같습니다.

척와(Chukwa), 스크라이브(Scribe), 플룸(Flume) 등 대량의 로그를 수집하고 저장하는 기술을 사용하면 효율적일 것 같습니다.

 참고 : https://ryufree.tistory.com/190

### 5. DB Connection Pool 의 개념에 대해서 설명하고, 왜 사용하는지 이유를 설명하세요. 

\- DB 접속의 경우 JDBC 드라이버를 로드, Connection 객체를 생성, 쿼리를 수행하기 위한 Statement 객체를 생성, executeQuery() 메소드를 수행하여 그 결과로 ResultSet 객체를 받아 데이터를 처리하는 반복 작업이 일어난다.

이 작업에서 객체를 생성하는 메모리비용과 대기시간을 줄이고자 DBCP를 사용한다.

즉, 다수의 HTTP 요청에 대한 Thread를 효율적으로 처리하기 위해 DBCP를 사용한다.

일정량의 DB Connection 객체를 생성하고 Pool이라는 공간안에 저장해둔다. 이 후 HTTP 요청에 따라 필요할 때 Pool에서 Connection 객체를 가져다 쓰고 반환한다.

 참고 : https://www.holaxprogramming.com/2013/01/10/devops-how-to-manage-dbcp/

### 6. Google API 나 Facebook Graph API 와 같은 REST API 서비스를 만든다고 할 때 전세계 여러 지역에 분포 되어 있는 사용자에게 안정적인 응답 속도를 제공하기 위해 어떤 방법 을 사용하면 좋을지 본인의 생각을 기술하세요. 

캐싱을 생각하였으나 API의 확장성을 따져보면 힘들 것 같습니다.

CDN(콘텐츠 전송 네트워크)를 활용하여 여러 노드에 데이터를 저장하여 API 제공하는 시스템을 구축하면 좀 더 안정적인 응답 속도로 API를 제공할 수 있을 것 같습니다.

 참고 : https://www.akamai.com/kr/ko/multimedia/documents/brochure/akamai-four-facts-about-apis.pdf
https://www.akamai.com/kr/ko/multimedia/documents/product-brief/akamai-solving-api-security-performance-for-enterprise-applications-focus-sheet.pdf

### 7. RDBMS(Oracle/MySQL/MariaDB 등)를 Main DB 로 사용하는 REST API 서비스를 개발/운 영하고 있습니다. 

##### A. 어떤 방식으로 성능을 극대화 할 수 있을지 본인의 생각을 기술하세요.(알고 있는 기술이나 구현 로직 등을 본인의 아이디어로 설명) 

HTTP 프로토콜의 Cache를 통한 네트워크 응답시간 감소

DB의 캐시를 활용한 디스크 I/O 최소화

DB SQL 쿼리 튜닝

비즈니스 로직 소스 코드 개선

 참고 : https://ehdvudee.tistory.com/24

##### B. 기존에 사용하던 RDBMS 가 Oracle 이었는데, 운영 비용의 이슈로 MySQL 로 DBMS 를 교체하려고 합니다. 서비스를 중지(서비스 점검을 걸고 사용자 접속을 차단)하지 않고 DBMS를 교체하거나 서비스 Down Time 을 최소화하여 DBMS 교체 작업을 하려면 어떤 방식으로 진행하면 좋을지 본인의 생각을 기술하세요.

 

참고 : [무중단 서비스 이전](https://www.slideshare.net/taehyunkim73700/ss-114924418) || [오라클_to_MySQL_마이그레이션](https://stricky.tistory.com/319)



### 참고 답변

##### A.어떤 방식으로 성능을 극대화 할 수 있을지 본인의 생각을 기술하세요.(알고 있는 기술이나 구현 로직 등을 본인의 아이디어로 설명)

1. DB write, read 나누기 - 운영중인 DB는 이중화가 되어있을 것이고, 이때 어플리케이션 단에서 DML은 rw DB IP에 날리고, select는 ro DB IP에 날리는거, DB가 down되어 스위칭 되는 경우는 secondary ip 할당으로 해결
2. 비동기 처리 - 비동기적인 프로그래밍은 성능 향상에 크게 기여한다. 예전에도 멀티쓰레드 프로그래밍 등 다양한 비동기를 위한 방법들을 사용해왔으며, 요즘은 자체적으로 비동기를 지원하도록 하는  언어들도 많이 생겨났다. 
3. 메시지 큐잉 - rabbitmq, kafka 등 메세지 큐잉을 하는 서버나 뭐 이런걸 하나 두고, 그아래에 실제 처리하는 서버들을 여러대로 분산을하면 저 서버에서 콜이 들어오면 그걸 계속 큐에 쌓으면서 실제 서버로 하나씩 전달하여 처리 분산
4. RESTful table 구축 - DB에 REST API 운영에 알맞는 형태의 테이블형태 구축(검색 ㄱ 우리회사는 안쓰는듯)
5. orm

B.기존에 사용하던 RDMS 가 ORACLE 이였는데, 운영 비용의 이슈로 MySQL로 DBMS를 교체하려고 합니다. 서비스를 중지(서비스 점검을 걸고 사용자 접속을 차단)하지 않고 DBMS를
교체하거나 Down Time을 최소화하여 DBMS 교체 작업을 하려면 어떤 방식으로 진행하면 좋을지 본인의 생각을 기술하세요.

1. 전체적인 흐름 https://stricky.tistory.com/319 (개발자입장에서 중요 내용 : oracle to mysql 쿼리 변경, 배포시점)
2. 동기화 시점 정해서 배포 - https://jason-lim.tistory.com/3 우리회사는 지난달에 블루그린 방식으로 to be도 연결해둔 상황에서 스위칭 함